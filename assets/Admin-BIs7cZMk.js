import{c as h,a as M,r as i,j as e,p as N,s as x}from"./index-CnWK80Bc.js";import{c as A}from"./matching-CmQnGECg.js";import{B as w}from"./Button-Bz1vrILd.js";import"./index-C2QYkVRQ.js";const R=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],T=h("circle-check-big",R);const U=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],$=h("heart-handshake",U);const B=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],z=h("users",B);function q(){const{currentUser:o,addRecommendation:k}=M(),[c,u]=i.useState("users"),[r,p]=i.useState([]);i.useEffect(()=>{(async()=>{const{data:l,error:v}=await x.from("profiles").select("*");!v&&l&&p(l.map(d=>({...d,interests:d.interests||[],photos:d.photos||[]})))})()},[]);const[t,g]=i.useState(""),[a,b]=i.useState(""),[n,m]=i.useState("soulmate"),[f,y]=i.useState(""),j=i.useMemo(()=>{if(t){const s=r.find(l=>l.id===t);if(s)return r.filter(d=>d.id!==t).map(d=>({profile:d,score:A(s,d)})).sort((d,C)=>C.score-d.score).slice(0,3)}return[]},[t,r]),S=async s=>{confirm("Are you sure you want to ban this user?")&&(p(r.filter(l=>l.id!==s)),await x.from("bans").insert({user_id:s,reason:"Admin Ban",banned_at:new Date().toISOString()}),alert(`User ${s} banned.`))},_=async()=>{if(!t||!a)return;if(t===a){alert("Cannot recommend a user to themselves.");return}const s={admin_id:o?.id||"admin",target_user_id:t,recommended_user_id:a,created_at:new Date().toISOString(),type:n};k({...s,id:Date.now().toString()}),await x.from("admin_recommendations").insert(s),y(n==="soulmate"?"Soul Mates Linked! ‚ú®":"Recommendation sent! üíò"),setTimeout(()=>y(""),3e3),g(""),b("")};return o?o.id==="admin"||o.is_admin||o.id.includes("admin")?e.jsxs("div",{className:"min-h-screen bg-background p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-primary",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex gap-4 mb-8 border-b border-gray-800 pb-4",children:[e.jsxs("button",{onClick:()=>u("users"),className:N("flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",c==="users"?"bg-primary/20 text-primary font-bold":"text-gray-400 hover:text-white"),children:[e.jsx(z,{size:20}),"User Management"]}),e.jsxs("button",{onClick:()=>u("matchmaker"),className:N("flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",c==="matchmaker"?"bg-purple-500/20 text-purple-400 font-bold":"text-gray-400 hover:text-white"),children:[e.jsx($,{size:20}),"Matchmaker"]})]}),c==="users"&&e.jsx("div",{className:"bg-gray-900 rounded-2xl overflow-hidden border border-gray-800",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-800 text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"User"}),e.jsx("th",{className:"p-4",children:"Role"}),e.jsx("th",{className:"p-4",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.primary_photo,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.course})]})]})}),e.jsx("td",{className:"p-4 text-sm text-gray-400",children:"Student"}),e.jsx("td",{className:"p-4",children:e.jsx(w,{variant:"ghost",className:"text-red-500 hover:bg-red-500/10 hover:text-red-500 px-3 py-1 text-sm h-auto",onClick:()=>S(s.id),children:"Ban"})})]},s.id))})]})}),c==="matchmaker"&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Cupid's Bow üèπ"}),e.jsx("p",{className:"text-gray-400",children:"Manually set up a recommendation between two students."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 relative",children:[e.jsxs("div",{className:`space-y-4 p-6 rounded-2xl border transition-all ${t?"bg-gray-900 border-primary/50 shadow-lg shadow-primary/10":"bg-gray-900 border-gray-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"1. The Seeker"}),t&&e.jsx("span",{className:"text-xs text-primary font-bold",children:"Selected"})]}),e.jsxs("select",{className:"w-full bg-black/30 border border-gray-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary appearance-none cursor-pointer",value:t,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"",children:"Choose a student..."}),r.map(s=>e.jsxs("option",{value:s.id,children:[s.name," ‚Ä¢ ",s.course]},s.id))]}),t?e.jsxs("div",{className:"flex items-center gap-4 mt-4 p-4 bg-black/40 rounded-xl border border-white/5",children:[e.jsx("img",{src:r.find(s=>s.id===t)?.primary_photo,className:"w-16 h-16 rounded-full object-cover border-2 border-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-white",children:r.find(s=>s.id===t)?.name}),e.jsx("div",{className:"text-sm text-gray-400",children:r.find(s=>s.id===t)?.course}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Will see the match"})]})]}):e.jsx("div",{className:"h-24 flex items-center justify-center border-2 border-dashed border-gray-800 rounded-xl text-gray-600 text-sm",children:"Select a user to begin"})]}),e.jsxs("div",{className:`space-y-4 p-6 rounded-2xl border transition-all ${a?"bg-gray-900 border-purple-500/50 shadow-lg shadow-purple-500/10":"bg-gray-900 border-gray-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"2. The Match"}),a&&e.jsx("span",{className:"text-xs text-purple-400 font-bold",children:"Selected"})]}),e.jsxs("select",{className:"w-full bg-black/30 border border-gray-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500 appearance-none cursor-pointer",value:a,onChange:s=>b(s.target.value),children:[e.jsx("option",{value:"",children:"Choose a student..."}),j.length>0&&e.jsx("optgroup",{label:"‚ú® Top Suggestions",children:j.map(s=>e.jsxs("option",{value:s.profile.id,children:["üî• ",s.score,"% - ",s.profile.name]},s.profile.id))}),e.jsx("optgroup",{label:"All Students",children:r.map(s=>e.jsxs("option",{value:s.id,children:[s.name," ‚Ä¢ ",s.course]},s.id))})]}),a?e.jsxs("div",{className:"flex items-center gap-4 mt-4 p-4 bg-black/40 rounded-xl border border-white/5",children:[e.jsx("img",{src:r.find(s=>s.id===a)?.primary_photo,className:"w-16 h-16 rounded-full object-cover border-2 border-purple-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-white",children:r.find(s=>s.id===a)?.name}),e.jsx("div",{className:"text-sm text-gray-400",children:r.find(s=>s.id===a)?.course}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Will be recommended"})]})]}):e.jsx("div",{className:"h-24 flex items-center justify-center border-2 border-dashed border-gray-800 rounded-xl text-gray-600 text-sm",children:"Select a user to match"})]}),e.jsx("div",{className:"hidden md:flex absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-gray-900 rounded-full items-center justify-center border border-gray-700 shadow-xl",children:n==="soulmate"?"‚ú®":n==="friend"?"ü§ù":"‚û°Ô∏è"})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>m("standard"),className:`px-6 py-3 rounded-xl border transition-all ${n==="standard"?"bg-blue-500/20 border-blue-500 text-blue-400 font-bold":"bg-gray-900 border-gray-800 text-gray-400"}`,children:"Standard"}),e.jsx("button",{onClick:()=>m("friend"),className:`px-6 py-3 rounded-xl border transition-all ${n==="friend"?"bg-yellow-500/20 border-yellow-500 text-yellow-400 font-bold":"bg-gray-900 border-gray-800 text-gray-400"}`,children:"Friend ü§ù"}),e.jsx("button",{onClick:()=>m("soulmate"),className:`px-6 py-3 rounded-xl border transition-all ${n==="soulmate"?"bg-pink-500/20 border-pink-500 text-pink-400 font-bold shadow-lg shadow-pink-500/20":"bg-gray-900 border-gray-800 text-gray-400"}`,children:"Soul Mate ‚ú®"})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(w,{size:"lg",className:`w-full md:w-auto min-w-[200px] transition-all transform active:scale-95 ${n==="soulmate"?"bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 hover:shadow-lg hover:shadow-purple-500/25":n==="friend"?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-blue-600 to-blue-800"}`,onClick:_,disabled:!t||!a,children:n==="soulmate"?"Link Soul Mates ‚ú®":n==="friend"?"Suggest Friend ü§ù":"Send Recommendation"})}),f&&e.jsxs("div",{className:"bg-green-500/20 border border-green-500/50 text-green-200 p-4 rounded-xl flex items-center justify-center gap-2 animate-bounce",children:[e.jsx(T,{size:20}),f]})]})]}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6 text-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-red-500 mb-4",children:"Restricted Area üö´"}),e.jsx("p",{className:"text-gray-400",children:"You do not have permission to access the Cupid Dashboard."})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6 text-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-red-500 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400",children:"You must be logged in to view this page."})]})})}export{q as default};
