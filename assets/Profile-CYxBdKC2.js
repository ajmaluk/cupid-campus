import{c as f,a as C,u as z,r as m,j as e,A,m as b}from"./index-Dhzu-lA5.js";import{B as r}from"./Button-Kzv1x8oz.js";import{P}from"./PageTransition-K6c_Ev3n.js";import{v as L,u as S}from"./faceRecognition-B58rmIzU.js";import{L as _}from"./loader-circle-B-5vLa0N.js";import{P as I}from"./pen-BAb0W-Oy.js";import{C as x}from"./chevron-right-B8nfOezA.js";import{L as E,T as R}from"./trash-2-tPnRFAXx.js";const U=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],B=f("camera",U);const D=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],T=f("settings",D);function q(){const{currentUser:a,setCurrentUser:i}=C(),t=z(),[l,o]=m.useState(!1),[u,v]=m.useState(a?.bio||""),[h,n]=m.useState(!1),y=()=>{confirm("Are you sure you want to log out?")&&(i(null),t("/"))},j=()=>{a&&(i({...a,bio:u}),o(!1))},N=async s=>{if(s.target.files&&s.target.files[0]&&a){const g=s.target.files[0];n(!0);try{const{isValid:c,error:k}=await L(g);if(!c){alert(k||"Face validation failed."),n(!1),s.target.value="";return}const p=await S(g);i({...a,primary_photo:p,photos:a.photos.map(d=>d.is_primary?{...d,url:p}:d)})}catch(c){console.error(c),alert("Failed to update avatar.")}finally{n(!1)}}},w=()=>{confirm("⚠️ WARNING: This will clear ALL your data (matches, messages, swipes) and log you out. Continue?")&&(localStorage.removeItem("cupid-storage"),window.location.reload())};return a?e.jsx(P,{children:e.jsxs("div",{className:"min-h-screen bg-background pb-24 relative overflow-hidden",children:[e.jsxs("div",{className:"relative h-72",children:[e.jsx("img",{src:a.primary_photo,alt:"Profile Cover",className:"w-full h-full object-cover opacity-80"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-background/60 to-background"}),e.jsx("button",{onClick:()=>t("/settings"),className:"absolute top-6 right-6 p-2 bg-black/30 backdrop-blur-md rounded-full text-white hover:bg-black/50 transition-colors",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"px-6 -mt-24 relative z-10 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[e.jsxs("div",{className:"w-full h-full rounded-full border-4 border-background overflow-hidden shadow-2xl relative",children:[e.jsx("img",{src:a.primary_photo,alt:"Profile Avatar",className:"w-full h-full object-cover"}),h&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(_,{className:"animate-spin text-white"})})]}),l&&e.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary p-2 rounded-full text-white shadow-lg border-2 border-background cursor-pointer hover:bg-primary/90 transition-colors",children:[e.jsx(B,{size:16}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:N,disabled:h})]})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-1",children:[a.name,", ",a.age]}),e.jsxs("p",{className:"text-gray-400 font-medium",children:[a.course," • ",a.year]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm p-5 rounded-3xl border border-white/5 relative group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"About Me"}),!l&&e.jsx("button",{onClick:()=>o(!0),className:"p-1.5 text-primary bg-primary/10 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(I,{size:14})})]}),e.jsx(A,{mode:"wait",children:l?e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsx("textarea",{className:"w-full bg-black/20 rounded-xl p-3 text-white border border-white/10 focus:border-primary/50 outline-none resize-none h-24",value:u,onChange:s=>v(s.target.value)}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(r,{size:"sm",onClick:j,className:"flex-1",children:"Save"}),e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>o(!1),className:"flex-1",children:"Cancel"})]})]}):e.jsx(b.p,{initial:{opacity:0},animate:{opacity:1},className:"text-gray-200 leading-relaxed",children:a.bio})})]}),e.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm p-5 rounded-3xl border border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Interests"}),e.jsx(x,{size:16,className:"text-gray-600"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.interests.map(s=>e.jsx("span",{className:"bg-white/5 border border-white/10 px-3 py-1.5 rounded-full text-sm text-gray-300",children:s},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>t("/edit-profile"),className:"w-full flex items-center justify-between p-4 bg-gray-900/30 rounded-2xl text-left hover:bg-gray-900/50 transition-all active:scale-[0.98]",children:[e.jsx("span",{className:"font-medium",children:"Edit Profile Details"}),e.jsx(x,{size:18,className:"text-gray-600"})]}),e.jsxs("button",{onClick:()=>t("/settings"),className:"w-full flex items-center justify-between p-4 bg-gray-900/30 rounded-2xl text-left hover:bg-gray-900/50 transition-all active:scale-[0.98]",children:[e.jsx("span",{className:"font-medium",children:"Discovery Settings"}),e.jsx(x,{size:18,className:"text-gray-600"})]})]}),e.jsxs(r,{variant:"ghost",className:"w-full text-red-400 hover:text-red-300 hover:bg-red-500/10 h-14",onClick:y,children:[e.jsx(E,{size:18,className:"mr-2"}),"Log Out"]}),e.jsxs(r,{variant:"ghost",className:"w-full text-gray-500 hover:text-white hover:bg-white/5 h-12 text-xs uppercase tracking-wider border border-transparent hover:border-red-500/20",onClick:w,children:[e.jsx(R,{size:14,className:"mr-2"}),"Reset App Data (Debug)"]}),e.jsx("div",{className:"h-4"})," "]})]})]})}):null}export{q as default};
